THESIS.TEX
% !TeX spellcheck = en_US
% !TeX encoding = UTF-8

% COMPILE WITH:
% `latexmk`
% You need lualatex and biber (in all TeXLive distributions)

\documentclass[
    numbers=noenddot,
    %listof=totoc,
    parskip=half-,
    fontsize=12pt,
    paper=a4,
    oneside,
    titlepage,
    bibliography=totoc,
    chapterprefix=false,
%    draft
]{scrbook}

% use lualatex or xelatex
\usepackage{fontspec}
\usepackage{graphicx}
\usepackage[doublespacing]{setspace}

% better language support
\usepackage{polyglossia}
\setdefaultlanguage{english}
\setotherlanguage{german}

\usepackage{tocbasic}
\usepackage{booktabs}
\usepackage{multicol}
\usepackage{multirow}

\usepackage[]{scrlayer-scrpage}

% better bibliography (biblatex style)
% use biber to compile
\usepackage[citestyle=alphabetic, bibstyle=alphabetic, sorting=nyt, backend=biber, language=english, backref=true, maxcitenames=2]{biblatex}


% better quotes
% use \enquote{text}
\usepackage[autostyle,english=american,german=quotes]{csquotes}
\addbibresource{bibliography.bib}

% appendix
\usepackage[titletoc]{appendix}

% where to put all images and figures
\graphicspath{{images/}}

% YOUR PACKAGES
%These packages allow the most of the common "mathly things"
\usepackage{amsmath,amsthm,amssymb}
\usepackage{amsmath,amsfonts,amssymb}
\newcommand\tab[1][1cm]{\hspace*{#1}}
\usepackage{verbatim} 
% Title
\title{TITLE}

% Author
\author{AUTHOR}

% Date
\date{\today}

% CHOOSE ACCORDINGLY
%\newcommand{\thesisType}{Bachelorarbeit}
\newcommand{\thesisType}{Masterarbeit}

\makeatletter
\let\thetitle\@title
\let\theauthor\@author
\let\thedate\@date
\makeatother

\pagestyle{scrheadings}

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\frontmatter
% CHOOSE ACCORDINGLY
%\include{includes/BA-titlepage}
\include{includes/MA-titlepage}

\tableofcontents
\newpage

% -- ABSTRACT
\include{includes/abstract}
\newpage

% -- Acknowledgements (optional)
\include{includes/acknowledgements}
\newpage

% -- List of figures
\thispagestyle{empty}
\cleardoublepage
\listoffigures
\newpage

% -- List of tables
\thispagestyle{empty}
\cleardoublepage
\listoftables
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\mainmatter

% -- Chapters
% following IMRaD structure
% adjust for your liking
\include{chapters/introduction}
\include{chapters/methods}
\include{chapters/results}
\include{chapters/discussion}

% -- Appendix (optional)
\begin{appendices}
    \input{appendix.tex}
\end{appendices}
\newpage


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\backmatter

% -- Bibliography
\printbibliography

% -- Eidesstattliche Erklärung (= Affadavit)
\include{includes/eidesstattlicheErklaerung}


\end{document}

INTRODUCTION.TEX
\chapter{Abstract}
Large scale deployment of Electric Vehicles (EVs)can  help to reduce the usage of fossil fuel and greenhouse gas emissionin the transportation sector. However, without enhancing the power gird infrastructure,  thiswill  create bottlenecks in the power supplyby the distribution grid. In this thesis, we propose to couple EVs, Grid-2-Vehicle and Vehicle-2-Grid,  with local renewable resources, like photovoltaic systems or stationary battery storage, and introduce  a smart charging strategy in order to overcome power supply limitations and  the single phase power imbalance constraint in residential household connections  (Central Europe). To achieve this, we develop a heuristic algorithm to adjust a typical charging scheme of “immediate charging on arrival” to an optimal charging scheme where the EVs are charged based on a dynamic pricingmechanism, that is triggered by  i.eprice insentives from the grid to shift the loadaway from peak times. Also, we develop an algorithm that minimizes the wait time ofseveral EVs to be charged based on the Earliest Deadline First (EDF) approach extended witha V2G-solution  and a dynamic maximum power consumption constraint. Finally, the results of implementing the above algorithms show an optimized way to charge Electric Vehicles by solving alocal pricing model that takes the electricity cost, prcining of V2G and delay in departure time into account. Furthermore, it flattens the load profile curve by valley-filling technique without exceeding the grid limitations.

\newpage

METHODS.TEX
\chapter{Cost Optimization Formulation}\label{chap:Cost Optimization Formulation}

\textit{\textbf{A. Problem Description}}

The market prices are obtained from the Energy Market according to which, the EV scheduling is done so as to minimize the cost for charging an EV. The user can set the expected departure time of an EV when is connected to the grid through the charger. To protect the battery from being damaged in charging process,
the maximum charging power can be also set artificially. The charger with embedded market price module can now intelligently formulate optimized charging scheme in consideration of the SOC curve and the maximum charging power(from Grid,PV and battery) set by controller in a phase of a 3 phase system, the aim of which is to minimize the cost.

\textit{\textbf{B. Objective Function}}

Take the cost that EV users need to pay to charge once as objection function
 
 \[ min\rightarrow C = \int\limits_{t_0}^{t_0+T} P(t)C(t) \ dt + D(t){C_D} \tag{1} \label{eq:1}\]            
In \eqref{eq:1}, P(t) is the power from the grid and PV and/or battery, C(t) is the market price at time t, D(t) is the Delay time and \({C_D}\) is the Delay cost respectively.

\[{P_{Storage}} = {E_{Storage,0}}+\int\limits_{t_0}^{t_0+T} {P_{Bat,t}} \ dt + e \tag{2} \label{eq:2}\]
In \eqref{eq:2}, \({E_{Storage,0}}\) is the initial energy state of the storage battery, \({P_{Bat,t}}\) is the is the charging/discharging power of EV battery at t and e is the error due to charging/discharging imbalance.
\[{P_{rr}} = \sum\limits_{t=1}^{T} {P_{pv}(t)} \tag{3} \label{eq:3}\]
In \eqref{eq:3},\({P_{rr}}\)  is the total renewable resource output till time t+T and \({P_{pv}(t)}\) is the energy generated by PV at time t.
Therefore, P(t) in \eqref{eq:1} is calculated as follows,
\[P(t) = {P_{Grid}(t)}+{P_{rr}}+{P_{Storage}}\tag{4} \label{eq:4}\]
In \eqref{eq:4}, is the total power at t.

\textit{\textbf{C. Constraints}}

From the power expression \(P= VI\), the charging power of EV battery should not exceed a certain limited value. The charging power is constrained by \eqref{eq:5}
\[-{P_{max}}\leq {P_{Bat,t}} \leq {P_{max}}\tag{5} \label{eq:5}\]
where \(-{P_{max}}\) and \({P_{max}}\) are the upper and lower power limitation during the battery charging/discharging process respectively. \({P_{Bat,t}}\) is the charging/discharging power of EV battery at t. 

The initial SOC of various EV batteries are different as the driving mode and charging habits of different EV users are not the same. The energy demand of EV user with initial SOC considered is stated as below
\[\int\limits_{t_0}^{t_0+T} P(t) \ dt = ({SOC_{dep}}-{SOC_{int}}){B_r}\tag{6} \label{eq:6}\]
In \eqref{eq:6}, \({SOC_{dep}}\) is the required SOC level provided by the user at the time of departure,\({SOC_{int}}\) is the initial SOC value and \({B_r}\) is the rated capacity of EV battery.

The main constraint used in this thesis is to charge the EV in a single phase out of a three phase system, In order to find that single phase the following is done,
\[{P_{EV_{(i)}}(t)} = \sum \limits_{j=1}^{3} \alpha_{ij} {P_{ij}(t)}\tag{7} \label{eq:7}\]
such that, \(\sum \limits_{j=1}^{3} \alpha_{ij} = 1\) , where j is the number of phases.

Grid constraints are specified as follows,
\[{P_{G}(t)} = \sum \limits_{i=0}^{n} {P_{EV_{(i)}}(t)}\tag{8} \label{eq:8}\]
On substituting \eqref{eq:7} in \eqref{eq:8} we get \eqref{eq:9},
\[{P_{Gj}(t)} = \sum \limits_{i=0}^{n} \sum \limits_{j=1}^{3} \alpha_{ij} {P_{ij}(t)} \tag{9} \label{eq:9}\]

The grid current and voltage imbalance is given by the following equations,
\begin{enumerate}
\item Current Imbalance:
\[I_{im} = \frac {(I_{m} - I_{A}) (I_{m} - I_{B}) (I_{m} - I_{C})} {I_{m}} \times 100\% \tag{10} \label{eq:10} \]
where, \[I_{im} = \frac {(I_{A}) (I_{B}) (I_{C})}
{3}\]
\item Voltage Imbalance:
\[V_{im} = \frac {(V_{m} - V_{A}) (V_{m} - V_{B}) (V_{m} - V_{C})} {V_{m}} \times 100\% \tag{10} \label{eq:10} \]
where, \[V_{im} = \frac {(V_{A}) (V_{B}) (V_{C})}
{3}\]
\end{enumerate}

\chapter{Smart Grid Architecture Model (SGAM)}\label{chap:Smart Grid Architecture Model (SGAM)}
SGAM is the best approach for the modeling of use cases in a structured manner. The purpose
of developing SGAM was to provide an easiest and simplest way to illustrates or visualize the
smart grid related functionalities. The SGAM represents how the three-dimensional (zone plane,
domain plane, and interoperability layers) architecture is used to describe the use case and sub
functionalities of the use case in pictorial form.

SGAM is represented as follows,
\begin{enumerate}
  \item SGAM domain (one dimensional smart grid plane) shows the stages involved in
transmission of power of electrical energy from generation to customers.
  \item SGAM zone shows that how the power system management is divided in hierarchical
way into six zones, namely; process, field, station, operation, enterprise, and market.
  \item The interoperability layers represent that how the devices, communication and IT
technologies are integrated that belongs to different layers of interoperability.
\end{enumerate}
\begin{figure}[htb]
	\centering
	\includegraphics[width=0.55\linewidth]{SGAM}
	\caption{Smart Grid Architecture Model }
	\label{fig:Smart Grid Architecture Model }
\end{figure}

\textbf{Interoperability layers}: The various interoperability layers as described in the below table (Table 1.1)

\begin{table}[h!t]
	\begin{center}
	\begin{tabular} { | l | p{11cm} | }
    \hline
		\textbf{Layer} & \textbf{Description} \\ 
		\hline
		Business & This layer maps the use case into SGAM to realize the
effect/involvement/role of regulatory and economic markets, policies, and
business models. \\ 
		\hline
		Function & This layer presents the functions for the use cases in pictorial form as well as the services related to the use case. \\ 
        \hline
        Information & This layer describes the exchange of information for function, services and components. This layer represents the information object and
canonical data model. \\ 
		\hline
        Communication & This layer provides the communication media, protocols and mechanisms for data transmission from the component layer to the process and
function layer. \\ 
		\hline
        Component & This layer presents the physical components used in SGAM for the use case,which includes power system equipment, communication network
infrastructure and computers used for applications. \\ 
		\hline

	\end{tabular}
\end{center}
    \caption{Interoperability layers}
    \label{table:1} 
\end{table}

\textbf{SGAM Domains}: The various domains used in SGAM are as described in the below table (Table 1.2)


\begin{table}[h!t]
	\centering
	\begin{tabular} { | l | p{11cm} | }
    \hline
		\textbf{Domain} & \textbf{Description} \\ 
		\hline
		(Bulk) Generation & This layer represents the generation of electricity in bulk quantity. The
generators are connected to the transmission system, Examples of
generation are power plants (nuclear, hydro, solar power plants) and wind
farms. \\ 
		\hline
		Transmission & The transmission layer represents the transportation of electricity from
Generation to Distribution over long distance. \\ 
        \hline
        Distribution & This layer represents the infrastructure for the distribution of electricity to
customers.\\ 
		\hline
        DER & The DER represent the distributed electricity resources connected at the
small scale at homes/hospitals or at industries.These resources may be
controlled by DSO or a customer itself. \\ 
		\hline
        Customer & It holds the both consumers and prosumers of electricity. \\ 
		\hline

	\end{tabular}
    \caption{SGAM Domains}
    \label{table:2} 
\end{table}

\textbf{SGAM Zones}: The various zones used in SGAM are as described in the below table (Table 1.3)


\begin{table}[h!b]
	\centering
	\begin{tabular} { | l | p{14cm} | }
    \hline
		\textbf{Zone} & \textbf{Description} \\ 
		\hline
		Process & The process shows the transform of energy (electricity, solar, wind, water,
heat). The physical components that are involved in process are Generators,
transformers, cables, electrical loads, sensors and actuators. \\ 
		\hline
		Field & The field consists of the equipment (IEDs) for monitoring and controlling and
provides the protection of a process of the power system. \\ 
        \hline
        Station & The station is used for data collection, supervision, and substation
automation functionalities.\\ 
		\hline
        Operation & Hosting power system control operation in respective domains, the
operations include monitoring, supervision, estate estimation, controlling and
management of electricity production, transmission, distribution, storage and
consumption. \\ 
		\hline
        Enterprise & It holds the both consumers and prosumers of electricity.It provides commercial and organizational process, services and
infrastructure for enterprises(utilities, service providers, energy traders) eg.
Asset management, staff training, billing and procurement. \\
		\hline
        Market & Reflecting the market operations possible along the energy conversion
chain. Examples Energy trading, mass market, retail market, etc.,\\ 
		\hline
	\end{tabular}
    \caption{SGAM Zones}
    \label{table:3} 
\end{table}
\clearpage
The interoperability layers are modeled in the following section based on the use case for the thesis i.e to charge an EV efficiently in a single phase under specified grid constraints by coupling the
photo-voltaic panels and the energy storage device (battery).

\section{SGAM use case modelling }
\subsection{Component Layer :}

The component layer shows the physical devices, components and communication media used
for the use cases. The components used in the component layer are,

\begin{table}[h!b]
	\centering
	\begin{tabular} { | p{1cm} | p{2.5cm} | l | l | p{8cm} | }
    \hline
		\textbf{Short name} & \textbf{Extended name} & \textbf{Domain} & \textbf{Zone} & \textbf{Reason} \\ 
		\hline
		C & Controller & Customer & Operation & The controller is placed in the Operation zone in customer domain because it provides monitoring and controlling of entities and provides asset management.\\ 
		\hline
		M & Market & Transmission & Market & Reflects the energy market prices. \\ 
        \hline
        SM & Smart Meter & Customer & Field & Monitors the electricity usage of a household. \\ 
		\hline
        DSO & Distribution System Operator & Distribution & Operation &  Power system control in the Distribution domain. \\ 
		\hline
        EV & Electric vehicle & Customer & Process &  Customers energy transformation \\
		\hline
        PV & Photo-voltaic Panels & Customer & Process & Customers physical energy conversion(solar) \\ 
		\hline
        B & Batteries & Customer & Process & Customers energy transformation  \\
		\hline
        U & User & Customer & Field & Monitors Arrival/ Departure time of EV \\ 
		\hline
        F & Forecast & Customer & Enterprise & Distribution of load profiles from utility \\ 
		\hline
	\end{tabular}
    \caption{SGAM Component layer}
    \label{table:4} 
\end{table}
\begin{figure}[htb]
	\centering
	\includegraphics[width=0.55\linewidth]{SGAM}
	\caption{Smart Grid Architecture Model }
	\label{fig:Smart Grid Architecture Model }
\end{figure}

\subsection{Business Layer :}

The business layer defines the business actors and business goals of use cases. The benefits that can be achieved by efficient EV charging use cases are: 
\begin{enumerate} 
\item Cost Optimization by charging EV's during off peak times or by using PV and batteries .  
\item Efficient EV charging at 7kw in one phase of a 3-phase system. 
\item Scheduling of EV’s based on earliest deadline.
\end{enumerate}
\clearpage
\begin{figure}[h]
	\centering
	\includegraphics[width=0.55\linewidth]{SGAM}
	\caption{Smart Grid Architecture Model }
	\label{fig:Smart Grid Architecture Model }
\end{figure}
The Business layer intends to host the business processes, business objectives, economic and regulatory constraints underlying the use case. 
 
The business layer shows the area affected by the use case and is influenced by its underlying business objectives. 
 
The main objective is to Efficiently charge the EV in a single phase out of 3 phases with the grid constraints.

\subsection{Information Layer :}

The task of the information layer is to generate object models with identification of supporting standards for data objects for data transmission between different actors. The information layer presents, 
 
• Business context view (what information is exchanged between actors and enterprise).  
 
 \subsubsection{Business context view}
 The business context view presents that what information is exchanged between actors and systems. 
 \begin{figure}[h!b]
	\centering
	\includegraphics[width=0.55\linewidth]{SGAM}
	\caption{Smart Grid Architecture Model }
	\label{fig:Smart Grid Architecture Model }
\end{figure}
 \begin{table}[h!b]
	\centering
	\begin{tabular} { | l | p{2.5cm} | l | }
    \hline
		\textbf{Information flow from} & \textbf{Information flow into} & \textbf{Information transfered} \\ 
		\hline
		Smart Meter & Controller & U,I \\ 
		\hline
		 Forecast & Controller &  Load profiles \\ 
        \hline
         Controller & EV,PV,B & P,Q and charging/discharging of power to grid \\ 
		\hline
         Distribution System Operator & Controller  &  Grid Constraints (U and I) \\ 
		\hline
         Electric vehicle & Controller & U,I \\
		\hline
         Photo-voltaic Panels & Controller and Forecast & U,I and load profile  \\ 
		\hline
         Batteries & Controller & P,Q \\
		\hline
         User & Controller & Arrival/Departure time and SOC level \\ 
         \hline
         Market & Controller & Price list \\
		\hline
        Household & Forecast and Smart Meter & U,I and load profile \\ 
		\hline
	\end{tabular}
    \caption{SGAM Information layer}
    \label{table:5} 
\end{table}
\subsection{Function layer :} 
 
The function layer describes the function of each entity/device/ application used in use cases. The goal or focus of the function layer is to support the IT related functionalities, which are used to support the functions of the business layer. The function layer illustrates that how the information is processed and utilized by different actors. 

\begin{figure}[h!b]
	\centering
	\includegraphics[width=0.55\linewidth]{SGAM}
	\caption{Smart Grid Architecture Model }
	\label{fig:Smart Grid Architecture Model }
\end{figure}

The following table shows the actors and their functionality in this use case. 
 \begin{table}[h!b]
	\centering
	\begin{tabular} { | p{3cm} | p{7cm} | p{7cm} | }
    \hline
		\textbf{Actor} & \textbf{Goal} & \textbf{Function in the use case} \\ 
		\hline
		Smart Meter & Improve the efficiency of electricity supply and reliability of electricity network. Provide data of electric power consumption from supply side and demand side to obtain the intelligent service for power demand. & Provides information about the load consumption, reactive power, active power and the load profiles of a residence \\ 
		\hline
		 Forecast & Forecasting/ distributing the acquired data to other resources &  Forecast the load profiles of PV and household to the controller \\ 
        \hline
         Controller & Controls all the controllable entities like EV,PV and Batteries. This is used to control the phases of the grid provided by DSO. Receives the market price from energy market. & A heuristic algorithm used to charge the EV efficiently by integrating with PV panels and batteries in a single phase with grid constraints to optimize the cost and for efficient scheduling of multiple EV's \\ 
		\hline
         DSO & Power distribution and management of electrical supply. Demand response management. Maintain the reliability of network and increase the efficiency in regular network operation by reducing response time and improving network fault management   &  Provides with simple household grid consisting of 3 phase using power factory software (including the grid limitations)  \\ 
		\hline
         Electric vehicle & EV's achieve 90\% energy conversion efficiency. Emits less greenhouse gases. EV costs less to drive than a comparable gas-powered vehicle. Charging during off peak period and discharging during peak periods & EV's are scheduled to optimally charge based on the arrival and departure time of the EV's. EV's perform charging and discharging of power to the grid. \\
		\hline
         Photo-voltaic Panels & Photo-voltaic panels, through photoelectric phenomenon, produce electricity in a direct electricity generation way. Solar energy is energy supplied by nature therefore free and abundant.  PV panels can provide an effective solution during energy demand.  & These provide the available power generated from the solar energy to a phase in which the EV will be charged  \\ 
		\hline
         Batteries & Li-ion battery don’t require maintenance to ensure their performance. Provides high energy density. The rate of self-discharge is less compared to other rechargeable cells such as Ni-Cad and NiMH forms  & These are used to store the energy which is not used during the day in off peak period and is used to charge the EV or to discharge it to the grid.  \\
		\hline
         User & User has to leave the house on the specified departure time with the specified SOC level & Provides arrival/departure time of EV’s and SOC level to be obtained \\ 
         \hline
         Market & Obtains the energy market price & Provides the price list to controller. \\
		\hline
       
	\end{tabular}
    \caption{SGAM Function layer}
    \label{table:6} 
\end{table}

\chapter{Algorithm cost formulation:}
Gurobi solver used to optimize the cost. Below is the description on how the search space is defined with certain constraints.\\[0.3cm]
Search space condition:
 
 \[ \left\{ {x \in \mathbb{R}^n | constraints } \right\} \] 
Above condition refers to determining a multi dimensional real valued search space with a set of constraints.\\[0.2cm]
The search space is defined as follows,
\[ \left\{ ( A_i, B_i, C_i, P_i ) \right\}_t \] 
where,
 \(1  \leq i \leq M  \) , \(1  \leq t \leq T  \) , \( P \in 
 \left[-P_{max}, P_{max} \right] \subseteq \mathbb{R}\) and A,B,C are the 3 phases\\[0.3cm]
 The parameters in the search space\( \left( A_i, B_i, C_i , P_i \right)\) are the phase and power of \(i^{th}\) EV's, M is the maximum number of EV's and T is the endding time.\\[0.3cm]
 Hence the dimension of the search space becomes : \[ \mathbb{R}^{MT} \] 
 The following are the constraints based on which the boundaries for the search space is defined,
 \begin{enumerate}
     \item Phase Constraints: \\
     Only one phase is chosen out of the 3 phases A,B and C
    For the tuple \(( A_i, B_i, C_i, P_i )\) the constraint is as follows, \\
    \[ A_i+B_i+C_i =1\]
    where  \( (A_i,B_i,C_i) \in \left\{0,1\right\} \)
     \item Grid constraints: \\
     The grid constraints are defined in such a way that the power consumption should not exceed 4.6KW
     \[ I(t) = f \left( P_A(t),P_B(t),P_C(t)\right)\]\\
     where,\\
     \(\forall t \in [1 , T] : I(t) \leq 4.6 \) KW \\[0.2cm]
     \( P_A(t) = \sum_{i=1}^{M} A_i \cdot P_i(t) \) \\ 
     \begin{comment} where,  \( I_{Q_{i},A} = \begin{cases}
        1 , & \text{if } \phi_i = A \\
        0 , & \text{else}
        \end{cases}\)
        \end{comment} 
    \\  \( P_B(t) = \sum_{i=1}^{M} B_i \cdot P_i(t) \) \\ 
     \begin{comment} where,  \( I_{Q_{i},B} = \begin{cases}
        1 , & \text{if } \phi_i = B \\
        0 , & \text{else}
        \end{cases}\)
        \end{comment} 
        \\ \( P_C(t) = \sum_{i=1}^{M} C_i \cdot P_i(t) \) \\
        \begin{comment}where,  \( I_{Q_{i},C} = \begin{cases}
        1 , & \text{if } \phi_i = C \\
        0 , & \text{else}
        \end{cases}\) 
        \end{comment}
         \[f ( P_A(t),P_B(t),P_C(t)) : max \left\{ |P_A(t)-P_B(t)|,|P_B(t)-P_C(t)|,|P_C(t)-P_A(t)| \right\} \leq 4.6 \] 
    This can be further linearized as follows,\\[0.2cm]
    \(|P_A(t)-P_B(t)|\leq 4.6 \implies -4.6 \leq P_A(t)-P_B(t) \leq 4.6 \)\\[0.2cm]
    \(|P_B(t)-P_C(t)|\leq 4.6 \implies -4.6 \leq P_B(t)-P_C(t) \leq 4.6 \)\\[0.2cm]
    \(|P_C(t)-P_A(t)|\leq 4.6 \implies -4.6 \leq P_C(t)-P_A(t) \leq 4.6 \)
     \item SOC constraints: \\[0.2cm]
     General constraint: \\[0.2cm]
     The constraint is that the energy consumed and/or produced \((E_i^t)\) by an EV must be greater than 0 and must be less than the maximum battery capacity \((E_{max})\).
     \[\forall t_x \in [T_S , T_D] : \tab E_i^t = \sum_{t=T_S}^{t_x} t \cdot P_i(t)\cdot \epsilon \]\\
     where, \(E_i^t \geq 0 \) ,\( E_i^t \leq E_{max} \) and \(\epsilon = 0.95\) is the efficiency value which provides the losses when charging and discharging.\\[0.3cm]
     User constraint: \\[0.2cm]
     The constraint is set so that the energy consumed and/or produced by an EV must be equal to \((E_{req})\).
     \[ E_{int} + \sum_{t=T_S}^{T_D} t \cdot P_i(t)\cdot \epsilon = E_{req}\]
     With an assumption that the initial value of the energy level of an EV battery \((E_{int})\) is provided by user.\\
     \item Power consumed at t \( \not\in [T_S,T_D] \): \\[0.2cm]
     This constraint defines that the power drawn is set to 0 during the time when the EV is not plugged in the charging station.
     \[\forall t \in [1 , T_S] \cup [T_D , T] : \tab P_i(t) =0 \]
    
     The total cost is calculated as follows,\\[0.2cm]
     The time duration is discretized with a fixed time slot duration and the time slot is enumerated with \(1  \leq t \leq T  \)\\[0.2cm]
     \(C = \sum_{i=1}^{M} C_i \)\\[0.2cm]
     \(C_i = \sum_{t=T_S}^{T_D} C_i(t) \) \tab where \(C_i(t) = E_i^t \cdot c(t) \) and
     \(E_i^t = t \cdot P_i(t) \cdot \epsilon \)\\[0.3cm]
     where, c(t) is the cost from market in ct/kwh, \(E_i^t\) is the energy of \(i^{th}\) EV at time t in kwh and \(C_i(t)\) is the cost of \(i^{th}\) EV at time t in ct (euro cent).\\[0.2cm]
     Finally the particle swarm optimization algorithm is used to minimize the total cost.\\[0.2cm]
     i.e \( min \to C \)
   
 \end{enumerate}

INCLUDE IMAGES SGAM.png AND uni-logo.png